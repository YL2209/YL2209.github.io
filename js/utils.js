const btf={debounce:(e,t=0,o=!1)=>{let n;return(...s)=>{const i=o&&!n;clearTimeout(n),n=setTimeout((()=>{n=null,o||e(...s)}),t),i&&e(...s)}},throttle:function(e,t,o={}){let n,s,i,a=0;const d=()=>{a=!1===o.leading?0:(new Date).getTime(),n=null,e.apply(s,i),n||(s=i=null)};return(...l)=>{const c=(new Date).getTime();a||!1!==o.leading||(a=c);const r=t-(c-a);s=this,i=l,r<=0||r>t?(n&&(clearTimeout(n),n=null),a=c,e.apply(s,i),n||(s=i=null)):n||!1===o.trailing||(n=setTimeout(d,r))}},sidebarPaddingR:()=>{const e=window.innerWidth,t=document.body.clientWidth,o=e-t;e!==t&&(document.body.style.paddingRight=o+"px")},snackbarShow:(e,t=!1,o=2e3)=>{const{position:n,bgLight:s,bgDark:i}=GLOBAL_CONFIG.Snackbar,a="light"===document.documentElement.getAttribute("data-theme")?s:i;Snackbar.show({text:"✨ "+e+" ✨",backgroundColor:a,showAction:t,actionText:"🍭🔮🎨🎊🍬",duration:o,pos:n,customClass:"snackbar-css"})},diffDate:(e,t=!1)=>{const o=new Date,n=new Date(e),s=o.getTime()-n.getTime(),i=36e5,a=24*i,{dateSuffix:d}=GLOBAL_CONFIG;if(!t)return parseInt(s/a);const l=s/2592e6,c=s/a,r=s/i,m=s/6e4;return l>12?n.toISOString().slice(0,10):l>=1?`${parseInt(l)} ${d.month}`:c>=1?`${parseInt(c)} ${d.day}`:r>=1?`${parseInt(r)} ${d.hour}`:m>=1?`${parseInt(m)} ${d.min}`:d.just},loadComment:(e,t)=>{if("IntersectionObserver"in window){const o=new IntersectionObserver((e=>{e[0].isIntersecting&&(t(),o.disconnect())}),{threshold:[0]});o.observe(e)}else t()},scrollToDest:(e,t=500)=>{const o=window.pageYOffset,n=document.getElementById("page-header").classList.contains("fixed");if((o>e||n)&&(e-=70),"scrollBehavior"in document.documentElement.style)return void window.scrollTo({top:e,behavior:"smooth"});let s=null;e=+e,window.requestAnimationFrame((function n(i){s=s||i;const a=i-s;o<e?window.scrollTo(0,(e-o)*a/t+o):window.scrollTo(0,o-(o-e)*a/t),a<t?window.requestAnimationFrame(n):window.scrollTo(0,e)}))},animateIn:(e,t)=>{e.style.display="block",e.style.animation=t},animateOut:(e,t)=>{e.addEventListener("animationend",(function t(){e.style.display="",e.style.animation="",e.removeEventListener("animationend",t)})),e.style.animation=t},wrap:(e,t,o)=>{const n=document.createElement(t);for(const[e,t]of Object.entries(o))n.setAttribute(e,t);e.parentNode.insertBefore(n,e),n.appendChild(e)},isHidden:e=>0===e.offsetHeight&&0===e.offsetWidth,getEleTop:e=>{let t=e.offsetTop,o=e.offsetParent;for(;null!==o;)t+=o.offsetTop,o=o.offsetParent;return t},loadLightbox:e=>{const t=GLOBAL_CONFIG.lightbox;"mediumZoom"===t&&mediumZoom(e,{background:"var(--zoom-bg)"}),"fancybox"===t&&(Array.from(e).forEach((e=>{if("A"!==e.parentNode.tagName){const t=e.dataset.lazySrc||e.src,o=e.title||e.alt||"";btf.wrap(e,"a",{href:t,"data-fancybox":"gallery","data-caption":o,"data-thumb":t})}})),window.fancyboxRun||(Fancybox.bind("[data-fancybox]",{Hash:!1,Thumbs:{showOnStart:!1},Images:{Panzoom:{maxScale:4}},Carousel:{transition:"slide"},Toolbar:{display:{left:["infobar"],middle:["zoomIn","zoomOut","toggle1to1","rotateCCW","rotateCW","flipX","flipY"],right:["slideshow","thumbs","close"]}}}),window.fancyboxRun=!0))},setLoading:{add:e=>{e.insertAdjacentHTML("afterend",'\n        <div class="loading-container">\n          <div class="loading-item">\n            <div></div><div></div><div></div><div></div><div></div>\n          </div>\n        </div>\n      ')},remove:e=>{e.nextElementSibling.remove()}},updateAnchor:e=>{if(e!==window.location.hash){e||(e=location.pathname);const t=GLOBAL_CONFIG_SITE.title;window.history.replaceState({url:location.href,title:t},t,e)}},getScrollPercent:(e,t)=>{const o=t.clientHeight,n=document.documentElement.clientHeight,s=(e-t.offsetTop)/(o>n?o-n:document.documentElement.scrollHeight-n),i=Math.round(100*s);return i>100?100:i<=0?0:i},addGlobalFn:(e,t,o=!1,n=window)=>{const s=n.globalFn||{},i=s[e]||{};o&&i[o]||(i[o=o||Object.keys(i).length]=t,s[e]=i,n.globalFn=s)},addEventListenerPjax:(e,t,o,n=!1)=>{e.addEventListener(t,o,n),btf.addGlobalFn("pjax",(()=>{e.removeEventListener(t,o,n)}))},removeGlobalFnEvent:(e,t=window)=>{const{globalFn:o={}}=t,n=o[e]||{},s=Object.keys(n);s.length&&(s.forEach((e=>{n[e]()})),delete t.globalFn[e])}},naokuo={setValueToBodyType:function(){const e=document.getElementById("page-type").value;document.body.dataset.type=e},switchConsole:()=>{const e=document.getElementById("console");document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on"),e.classList.contains("show")?e.classList.remove("show"):e.classList.add("show");const t=document.querySelector("#consoleKeyboard");t&&("true"===localStorage.getItem("keyboardToggle")?(t.classList.add("on"),anzhiyu_keyboard=!0):(t.classList.remove("on"),anzhiyu_keyboard=!1))},initConsoleState:function(){document.documentElement.classList.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")},hideConsole:function(){consoleEl.classList.contains("show")?consoleEl.classList.remove("show"):consoleEl.classList.contains("reward-show")&&consoleEl.classList.remove("reward-show");const e=document.getElementById("center-console");e.checked&&(e.checked=!1)},hideAsideBtn:()=>{const e=document.documentElement.classList;e.contains("hide-aside")?saveToLocal.set("aside-status","show",2):saveToLocal.set("aside-status","hide",2),e.toggle("hide-aside"),e.contains("hide-aside")?document.querySelector("#consoleHideAside").classList.add("on"):document.querySelector("#consoleHideAside").classList.remove("on")}};